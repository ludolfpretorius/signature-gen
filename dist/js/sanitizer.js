var HtmlSanitizer=new function(){var d={A:!0,ABBR:!0,B:!0,BLOCKQUOTE:!0,BODY:!0,BR:!0,CENTER:!0,CODE:!0,DIV:!0,EM:!0,FONT:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HR:!0,I:!0,IMG:!0,LABEL:!0,LI:!0,OL:!0,P:!0,PRE:!0,SMALL:!0,SOURCE:!0,SPAN:!0,STRONG:!0,TABLE:!0,TBODY:!0,TR:!0,TD:!0,TH:!0,THEAD:!0,UL:!0,U:!0,VIDEO:!0},m={FORM:!0},c={align:!0,color:!0,controls:!0,height:!0,href:!0,src:!0,style:!0,target:!0,title:!0,type:!0,width:!0},u={color:!0,"background-color":!0,"font-size":!0,"text-align":!0,"text-decoration":!0,"font-weight":!0},f=["http:","https:","data:","m-files:","file:","ftp:"],g={href:!0,action:!0};this.SanitizeHtml=function(e){if(""==(e=e.trim()))return"";if("<br>"==e)return"";var t=document.createElement("iframe");if(void 0===t.sandbox)return alert("Your browser does not support sandboxed iframes. Please upgrade to a modern browser."),"";t.sandbox="allow-same-origin",t.style.display="none",document.body.appendChild(t);var l=t.contentDocument||t.contentWindow.document;null==l.body&&l.write("<body></body>"),l.body.innerHTML=e;var n=function e(t){if(t.nodeType==Node.TEXT_NODE)var n=t.cloneNode(!0);else if(t.nodeType==Node.ELEMENT_NODE&&(d[t.tagName]||m[t.tagName])){if(("SPAN"==t.tagName||"B"==t.tagName||"I"==t.tagName||"U"==t.tagName)&&""==t.innerHTML.trim())return document.createDocumentFragment();n=m[t.tagName]?l.createElement("DIV"):l.createElement(t.tagName);for(var r=0;r<t.attributes.length;r++){var o=t.attributes[r];if(c[o.name])if("style"==o.name)for(s=0;s<t.style.length;s++){var a=t.style[s];u[a]&&n.style.setProperty(a,t.style.getPropertyValue(a))}else{if(g[o.name]&&-1<o.value.indexOf(":")&&!function(e,t){for(var n=0;n<t.length;n++)if(0==e.indexOf(t[n]))return 1}(o.value,f))continue;n.setAttribute(o.name,o.value)}}for(r=0;r<t.childNodes.length;r++){var i=e(t.childNodes[r]);n.appendChild(i,!1)}}else n=document.createDocumentFragment();return n}(l.body);return document.body.removeChild(t),n.innerHTML.replace(/<br[^>]*>(\S)/g,"<br>\n$1").replace(/div><div/g,"div>\n<div")},this.AllowedTags=d,this.AllowedAttributes=c,this.AllowedCssStyles=u,this.AllowedSchemas=f};

export default {HtmlSanitizer}